{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\donia\\\\Documents\\\\Tunisys\\\\src\\\\views\\\\technicien\\\\profil\\\\components\\\\index.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport { useAuthContext } from 'views/auth/hooks/useAuthContext';\nimport { useUsersContext } from 'Hooks/useUsersContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ModifierProfile = _ref => {\n  _s();\n\n  let {\n    handleClose,\n    user\n  } = _ref;\n  const {\n    use\n  } = useAuthContext();\n  const {\n    dispatch\n  } = useUsersContext();\n  const [firstname, setFirstname] = useState((user === null || user === void 0 ? void 0 : user.firstname) || \"\");\n  const [lastname, setLastname] = useState((user === null || user === void 0 ? void 0 : user.lastname) || \"\");\n  const [email, setEmail] = useState((user === null || user === void 0 ? void 0 : user.email) || \"\");\n  const [password, setPassword] = useState((user === null || user === void 0 ? void 0 : user.password) || \"\");\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    const userData = {\n      firstname: firstname,\n      lastname: lastname,\n      email: email,\n      password: password\n    };\n\n    if (user && user._id) {\n      try {\n        const response = await fetch(`/api/user/${user._id}`, {\n          method: \"PATCH\",\n          body: JSON.stringify(userData),\n          headers: {\n            \"Content-type\": \"application/json\",\n            'Authorization': `Bearer ${user.token}`\n          }\n        });\n\n        if (!response.ok) {\n          const errorData = await response.json();\n          throw new Error(errorData.message || \"Erreur dans la modification de la réclamation\");\n        }\n\n        const updatedUserData = await response.json();\n        dispatch({\n          type: \"UPDATE_PROFILE\",\n          payload: {\n            _id: user._id,\n            ...updatedUserData\n          }\n        });\n        handleClose();\n      } catch (error) {\n        console.error(error);\n      }\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed top-0 left-0 z-10 flex h-full w-full items-center justify-center\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"rounded-md bg-white p-8 border-2 shadow-lg border-tunisys-100\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"mb-4 text-xl font-semibold text-center text-tunisys-100\",\n        children: \"Modifier Profile\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"flex flex-col\",\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"Nom:\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: firstname,\n            onChange: e => setFirstname(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"Pr\\xE9nom:\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: lastname,\n            onChange: e => setLastname(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"Adresse email:\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: email,\n            onChange: e => setEmail(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"Mot de passe:\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: password,\n            onChange: e => setPassword(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"text-indigo-00 text-green-600 text- mt-4 rounded py-2 px-4 font-bold hover:text-green-600\",\n          type: \"submit\",\n          children: \" Enregistrer \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"mt-2 rounded bg-gray-500 py-2 px-4 font-bold text-white hover:bg-gray-600\",\n          type: \"button\",\n          onClick: handleClose,\n          children: \"Annuler \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ModifierProfile, \"s0E6qeSTQ2Ybf7YYQcaclGzqsIw=\", false, function () {\n  return [useAuthContext, useUsersContext];\n});\n\n_c = ModifierProfile;\nexport default ModifierProfile;\n\nvar _c;\n\n$RefreshReg$(_c, \"ModifierProfile\");","map":{"version":3,"names":["React","useState","useAuthContext","useUsersContext","ModifierProfile","handleClose","user","use","dispatch","firstname","setFirstname","lastname","setLastname","email","setEmail","password","setPassword","handleSubmit","e","preventDefault","userData","_id","response","fetch","method","body","JSON","stringify","headers","token","ok","errorData","json","Error","message","updatedUserData","type","payload","error","console","target","value"],"sources":["C:/Users/donia/Documents/Tunisys/src/views/technicien/profil/components/index.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport {useAuthContext } from 'views/auth/hooks/useAuthContext'\nimport { useUsersContext } from 'Hooks/useUsersContext';\n\nconst ModifierProfile = ({ handleClose,user }) => {\n  const {use} = useAuthContext()\n  const { dispatch } = useUsersContext()\n  const [firstname, setFirstname] = useState(user?.firstname || \"\");\n  const [lastname, setLastname] = useState(user?.lastname || \"\");\n  const [email, setEmail] = useState(user?.email || \"\");\n  const [password, setPassword] = useState(user?.password || \"\");\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n  \n    const userData = {\n      firstname : firstname,\n      lastname: lastname,\n      email: email,\n      password: password,\n     \n    };\n    if (user && user._id) {\n      try {\n        const response = await fetch(`/api/user/${user._id}`, {\n          method: \"PATCH\",\n          body: JSON.stringify(userData),\n          headers: {\n            \"Content-type\": \"application/json\",\n            'Authorization' :`Bearer ${user.token}`\n\n          },\n        });\n  \n        if (!response.ok) {\n          const errorData = await response.json();\n          throw new Error(errorData.message || \"Erreur dans la modification de la réclamation\");\n        }\n  \n        const updatedUserData = await response.json();\n        dispatch({\n          type: \"UPDATE_PROFILE\",\n          payload: { _id: user._id, ...updatedUserData },\n        });\n  \n        handleClose();\n      } catch (error) {\n        console.error(error);\n      }\n    }\n  }; \n  return (\n    <div className=\"fixed top-0 left-0 z-10 flex h-full w-full items-center justify-center\">\n      <div className=\"rounded-md bg-white p-8 border-2 shadow-lg border-tunisys-100\">\n        <h2 className=\"mb-4 text-xl font-semibold text-center text-tunisys-100\">Modifier Profile</h2>\n        <form className=\"flex flex-col\" onSubmit={handleSubmit}>\n          <label>\n            Nom:\n            <input\n              type=\"text\"\n              value={firstname}\n              onChange={(e) => setFirstname(e.target.value)}\n            />\n          </label>\n          <label>\n          Prénom:\n            <input\n              type=\"text\"\n              value={lastname}\n              onChange={(e) => setLastname(e.target.value)}\n            />\n          </label>\n          <label>\n           Adresse email:\n            <input\n              type=\"text\"\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n            />\n          </label>\n          <label>\n          Mot de passe:\n            <input\n              type=\"text\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n            />\n          </label>\n         \n          <button\n            className=\"text-indigo-00 text-green-600 text- mt-4 rounded py-2 px-4 font-bold hover:text-green-600\"\n            type=\"submit\"> Enregistrer </button>\n          <button\n            className=\"mt-2 rounded bg-gray-500 py-2 px-4 font-bold text-white hover:bg-gray-600\"\n            type=\"button\"\n            onClick={handleClose} >Annuler </button>\n        </form>\n      </div>\n    </div>\n  );\n  \n};\n\nexport default ModifierProfile;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}