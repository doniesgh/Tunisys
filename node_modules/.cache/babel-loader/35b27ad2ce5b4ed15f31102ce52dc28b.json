{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\donia\\\\Documents\\\\Tunisys\\\\src\\\\views\\\\admin\\\\ClientManagement\\\\SERVICE\\\\AddService.jsx\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { useState, useEffect, useMemo } from \"react\";\nimport { useAuthContext } from 'views/auth/hooks/useAuthContext';\nimport { toast, ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { MdList, MdShower } from 'react-icons/md';\nimport ContratList from '../../../Modals/ContratList';\nimport EquipementList from './EquipementList';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst AddService = () => {\n  _s();\n\n  const [isModalOpen, setModalOpen] = useState(false);\n  const [isEquipementModalOpen, setEquipementModalOpen] = useState(false);\n  const [client, setClient] = useState('');\n  const [clientId, setClientId] = useState('');\n  const [service_no, setServiceNo] = useState('');\n  const [quantity, setquantity] = useState('');\n  const [equipement, setequipement] = useState('');\n  const [model, setModel] = useState('');\n  const [contrat, setcontrat] = useState('');\n  const [effective_date, seteffective_date] = useState('');\n  const [termination_date, settermination_date] = useState('');\n  const [error, setError] = useState(null);\n  const [emptyFields, setEmptyFields] = useState([]);\n  const [successMessage, setSuccessMessage] = useState(\"\");\n  const [services, setServices] = useState([]);\n  const [selectedContratSn, setSelectedContratSn] = useState(\"\");\n  const [selectedContratId, setSelectedContratId] = useState(\"\");\n  const [selectedEquipementSn, setselectedEquipementSn] = useState([]);\n  const [working_hour_start, setworking_hour_start] = useState('');\n  const [working_hour_end, setworking_hour_end] = useState('');\n  const [response_time_critical, setresponse_time_critical] = useState('');\n  const [response_time_major, setresponse_time_major] = useState('');\n  const [response_time_minor, setresponse_time_minor] = useState(''); // MODAL //\n\n  const openContratModal = () => {\n    setModalOpen(true);\n  };\n\n  const closeContratModal = () => {\n    setModalOpen(false);\n  };\n\n  const openEquipementModal = () => {\n    setEquipementModalOpen(true);\n  };\n\n  const closeEquipementModal = () => {\n    setEquipementModalOpen(false);\n  };\n\n  const handleContratSelection = contratInfo => {\n    setSelectedContratSn(contratInfo.contrat_sn);\n    setSelectedContratId(contratInfo._id);\n    const formattedEffectiveDate = new Date(contratInfo.effective_date).toISOString().split('T')[0];\n    seteffective_date(formattedEffectiveDate);\n    const formattedTerminationDate = new Date(contratInfo.termination_date).toISOString().split('T')[0];\n    settermination_date(formattedTerminationDate);\n\n    if (contratInfo.client && contratInfo.client.length > 0) {\n      setClient(contratInfo.client[0].client || '');\n      setClientId(contratInfo.client[0]._id || '');\n    } else {\n      setClient('');\n    }\n\n    setSelectedContratId(contratInfo._id);\n    closeContratModal();\n  };\n  /* const handleEquipementSelection = (selectedEquipements) => {\n       const equipementSns = selectedEquipements.map(equipement => equipement.equipement_sn);\n       const equipementSnsString = equipementSns.join(', ');\n       setselectedEquipementSn(equipementSnsString);\n   };*/\n\n\n  const [selectedEquipementIds, setselectedEquipementIds] = useState([]);\n  /*const handleEquipementSelection = (selectedEquipements) => {\n      const equipementIds = selectedEquipements.map(equipement => equipement._id);\n      setselectedEquipementSn(equipement.equipement_sn)\n      setequipement(equipementIds);\n  };*/\n\n  const handleEquipementSelection = selectedEquipements => {\n    const equipementIds = selectedEquipements.map(equipement => equipement._id);\n    const equipementSns = selectedEquipements.map(equipement => equipement.equipement_sn); // Extract equipement_sn\n\n    setselectedEquipementSn(equipementSns.join(', '));\n    setequipement(equipementIds);\n  };\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    const clients = {\n      model,\n      equipement: equipement,\n      contrat: selectedContratId,\n      service_no,\n      effective_date,\n      termination_date,\n      client: clientId,\n      quantity,\n      working_hour_start,\n      working_hour_end,\n      response_time_critical,\n      response_time_major,\n      response_time_minor\n    };\n    console.log('Sending request with data:', clients);\n\n    try {\n      const response = await fetch('/api/service/add', {\n        method: 'POST',\n        body: JSON.stringify(clients),\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      const json = await response.json();\n      console.log(json);\n\n      if (!response.ok) {\n        if (json.error) {\n          setError(json.error);\n        }\n\n        if (json.emptyFields) {\n          setEmptyFields(json.emptyFields);\n        }\n      }\n\n      if (response.ok) {\n        setEmptyFields([]);\n        setClient('');\n        seteffective_date('');\n        settermination_date('');\n        setError(null);\n        toast.success('Service ajouté avec succès');\n        setSuccessMessage(\"Service ajouté avec succès\");\n        console.log('Request sent successfully');\n      }\n    } catch (error) {\n      console.error('Error:', error);\n      setError('Une erreur s\\'est produite lors de la soumission du formulaire.');\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"overflow-x-auto\",\n    children: [/*#__PURE__*/_jsxDEV(ToastContainer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-[1.7em]  mb-2.5 mx-0 text-center font-semibold dark:text-gray-600\",\n      children: \"Ajouter Service:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-1\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"border-b border-gray-900/10 pb-12\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sm:col-span-3 relative\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"service_no\",\n              className: \"block text-sm font-medium leading-6 text-gray-900 dark:text-gray-600\",\n              children: \"Service No\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 145,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: service_no,\n                onChange: e => setServiceNo(e.target.value),\n                className: \"block w-full border-red-700 rounded-md border-2 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 147,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 146,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sm:col-span-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"contrat\",\n              className: \"block text-sm font-medium leading-6 text-gray-900 dark:text-gray-600\",\n              children: \"Contrat\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 154,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex\",\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                placeholder: selectedContratSn ? selectedContratSn : '',\n                value: selectedContratId ? selectedContratId : '',\n                onClick: openContratModal,\n                className: \"block w-full border-red-700 rounded-md border-2 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 cursor-pointer\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 156,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 155,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sm:col-span-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"model\",\n              className: \"block text-sm font-medium leading-6 text-gray-900 dark:text-gray-600\",\n              children: \"Model\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: model,\n                onChange: e => setModel(e.target.value),\n                className: \"block w-full border-red-700 rounded-md border-2 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 170,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sm:col-span-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"termination_date\",\n              className: \"block text-sm font-medium leading-6 text-gray-900 dark:text-gray-600\",\n              children: \"Garantie Start Date \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"Date\",\n                value: effective_date,\n                onChange: e => settermination_date(e.target.value),\n                className: \"block w-full border-red-700 rounded-md border-2  py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 179,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sm:col-span-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"equipement\",\n              className: \"block text-sm font-medium leading-6 text-gray-900 dark:text-gray-600\",\n              children: \"Equipement S/N\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 186,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                onClick: openEquipementModal,\n                placeholder: selectedEquipementSn,\n                value: selectedEquipementSn,\n                readOnly: true,\n                className: \"block w-full border-red-700 rounded-md border-2 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 cursor-pointer\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 188,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 187,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sm:col-span-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"termination_date\",\n              className: \"block text-sm font-medium leading-6 text-gray-900 dark:text-gray-600\",\n              children: \"Garantie termination Date \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 199,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"Date\",\n                value: termination_date,\n                onChange: e => settermination_date(e.target.value),\n                className: \"block w-full border-red-700 rounded-md border-2  py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 201,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 200,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sm:col-span-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"quantity\",\n              className: \"block text-sm font-medium leading-6 text-gray-900 dark:text-gray-600\",\n              children: \"Quantit\\xE9 \\xE9quipement\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 208,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                value: quantity,\n                onChange: e => setquantity(e.target.value),\n                className: \"block w-full border-red-700 rounded-md border-2 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 210,\n                columnNumber: 33\n              }, this), \"                    \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sm:col-span-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"termination_date\",\n              className: \"block text-sm font-medium leading-6 text-gray-900 dark:text-gray-600\",\n              children: \"Client\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 218,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                placeholder: client ? client : '',\n                value: client ? client : '',\n                onChange: e => setClient(e.target.value),\n                className: \"block w-full border-red-700 rounded-md border-2  py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 220,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sm:col-span-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"termination_date\",\n              className: \"block text-sm font-medium leading-6 text-gray-900 dark:text-gray-600\",\n              children: \"heure de travail \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 229,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"time\",\n                value: working_hour_start,\n                onChange: e => setworking_hour_start(e.target.value),\n                className: \"block border-red-700 rounded-md border-2  py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 231,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"time\",\n                value: working_hour_end,\n                onChange: e => setworking_hour_end(e.target.value),\n                className: \"block ml-5 border-red-700 rounded-md border-2  py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 236,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 230,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sm:col-span-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"termination_date\",\n              className: \"block text-sm font-medium leading-6 text-gray-900 dark:text-gray-600\",\n              children: \"Response time \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 243,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"termination_date\",\n                className: \"block text-sm font-medium leading-6 text-gray-900 dark:text-gray-600\",\n                children: \"critical \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 245,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                value: response_time_critical,\n                onChange: e => setresponse_time_critical(e.target.value),\n                className: \"ml-2 w-20 block border-red-700 rounded-md border-2  py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 246,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"termination_date\",\n                className: \"ml-2 block text-sm font-medium leading-6 text-gray-900 dark:text-gray-600\",\n                children: \"major \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 250,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                value: response_time_major,\n                onChange: e => setresponse_time_major(e.target.value),\n                className: \"ml-2  w-20 block ml-5 border-red-700 rounded-md border-2  py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 252,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"termination_date\",\n                className: \"ml-2 block text-sm font-medium leading-6 text-gray-900 dark:text-gray-600\",\n                children: \"minor \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 256,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                value: response_time_minor,\n                onChange: e => setresponse_time_minor(e.target.value),\n                className: \"ml-2 ml-2  w-20 block ml-5 border-red-700 rounded-md border-2  py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 258,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 244,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-4 flex items-center justify-end gap-x-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: \"rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-red-300 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600\",\n        onClick: handleSubmit,\n        children: \"Valider\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: \"rounded-md bg-indigo-900 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600\",\n        children: \"Annuler\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 13\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error border rounded mx-0 my-5 p-2.5 border-solid bg-red-300\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 23\n    }, this), successMessage && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"success border rounded mx-0 my-5 p-2.5 border-solid bg-green-300\",\n      children: successMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 32\n    }, this), isModalOpen && /*#__PURE__*/_jsxDEV(ContratList, {\n      handleClose: closeContratModal,\n      handleContratSelection: handleContratSelection\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 29\n    }, this), isEquipementModalOpen && /*#__PURE__*/_jsxDEV(EquipementList, {\n      handleClose: closeEquipementModal,\n      handleEquipementSelection: handleEquipementSelection\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 39\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 137,\n    columnNumber: 9\n  }, this);\n};\n\n_s(AddService, \"QjmigDAudA6lfU2+oeaR7LfwMss=\");\n\n_c = AddService;\nexport default AddService;\n\nvar _c;\n\n$RefreshReg$(_c, \"AddService\");","map":{"version":3,"names":["React","useState","useEffect","useMemo","useAuthContext","toast","ToastContainer","MdList","MdShower","ContratList","EquipementList","AddService","isModalOpen","setModalOpen","isEquipementModalOpen","setEquipementModalOpen","client","setClient","clientId","setClientId","service_no","setServiceNo","quantity","setquantity","equipement","setequipement","model","setModel","contrat","setcontrat","effective_date","seteffective_date","termination_date","settermination_date","error","setError","emptyFields","setEmptyFields","successMessage","setSuccessMessage","services","setServices","selectedContratSn","setSelectedContratSn","selectedContratId","setSelectedContratId","selectedEquipementSn","setselectedEquipementSn","working_hour_start","setworking_hour_start","working_hour_end","setworking_hour_end","response_time_critical","setresponse_time_critical","response_time_major","setresponse_time_major","response_time_minor","setresponse_time_minor","openContratModal","closeContratModal","openEquipementModal","closeEquipementModal","handleContratSelection","contratInfo","contrat_sn","_id","formattedEffectiveDate","Date","toISOString","split","formattedTerminationDate","length","selectedEquipementIds","setselectedEquipementIds","handleEquipementSelection","selectedEquipements","equipementIds","map","equipementSns","equipement_sn","join","handleSubmit","e","preventDefault","clients","console","log","response","fetch","method","body","JSON","stringify","headers","json","ok","success","target","value"],"sources":["C:/Users/donia/Documents/Tunisys/src/views/admin/ClientManagement/SERVICE/AddService.jsx"],"sourcesContent":["import React from 'react'\nimport { useState, useEffect, useMemo } from \"react\";\nimport { useAuthContext } from 'views/auth/hooks/useAuthContext'\nimport { toast, ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { MdList, MdShower } from 'react-icons/md';\nimport ContratList from '../../../Modals/ContratList';\nimport EquipementList from './EquipementList';\nconst AddService = () => {\n    const [isModalOpen, setModalOpen] = useState(false);\n    const [isEquipementModalOpen, setEquipementModalOpen] = useState(false);\n    const [client, setClient] = useState('')\n    const [clientId, setClientId] = useState('')\n    const [service_no, setServiceNo] = useState('')\n    const [quantity, setquantity] = useState('')\n    const [equipement, setequipement] = useState('')\n    const [model, setModel] = useState('')\n    const [contrat, setcontrat] = useState('')\n    const [effective_date, seteffective_date] = useState('')\n    const [termination_date, settermination_date] = useState('')\n    const [error, setError] = useState(null)\n    const [emptyFields, setEmptyFields] = useState([]);\n    const [successMessage, setSuccessMessage] = useState(\"\");\n    const [services, setServices] = useState([]);\n    const [selectedContratSn, setSelectedContratSn] = useState(\"\")\n    const [selectedContratId, setSelectedContratId] = useState(\"\")\n    const [selectedEquipementSn, setselectedEquipementSn] = useState([])\n    const [working_hour_start, setworking_hour_start] = useState('')\n    const [working_hour_end, setworking_hour_end] = useState('')\n    const [response_time_critical, setresponse_time_critical] = useState('')\n    const [response_time_major, setresponse_time_major] = useState('')\n    const [response_time_minor, setresponse_time_minor] = useState('')\n\n\n\n    // MODAL //\n    const openContratModal = () => {\n        setModalOpen(true);\n    };\n    const closeContratModal = () => {\n        setModalOpen(false);\n    };\n    const openEquipementModal = () => {\n        setEquipementModalOpen(true);\n    };\n    const closeEquipementModal = () => {\n        setEquipementModalOpen(false);\n    };\n    const handleContratSelection = (contratInfo) => {\n        setSelectedContratSn(contratInfo.contrat_sn);\n        setSelectedContratId(contratInfo._id);\n        const formattedEffectiveDate = new Date(contratInfo.effective_date).toISOString().split('T')[0];\n        seteffective_date(formattedEffectiveDate);\n        const formattedTerminationDate = new Date(contratInfo.termination_date).toISOString().split('T')[0];\n        settermination_date(formattedTerminationDate);\n        if (contratInfo.client && contratInfo.client.length > 0) {\n            setClient(contratInfo.client[0].client || '');\n            setClientId(contratInfo.client[0]._id || '')\n        } else {\n            setClient('');\n        }\n        setSelectedContratId(contratInfo._id);\n        closeContratModal();\n    };\n    /* const handleEquipementSelection = (selectedEquipements) => {\n         const equipementSns = selectedEquipements.map(equipement => equipement.equipement_sn);\n         const equipementSnsString = equipementSns.join(', ');\n         setselectedEquipementSn(equipementSnsString);\n     };*/\n    const [selectedEquipementIds, setselectedEquipementIds] = useState([]);\n    /*const handleEquipementSelection = (selectedEquipements) => {\n        const equipementIds = selectedEquipements.map(equipement => equipement._id);\n        setselectedEquipementSn(equipement.equipement_sn)\n        setequipement(equipementIds);\n    };*/\n    const handleEquipementSelection = (selectedEquipements) => {\n        const equipementIds = selectedEquipements.map(equipement => equipement._id);\n        const equipementSns = selectedEquipements.map(equipement => equipement.equipement_sn); // Extract equipement_sn\n        setselectedEquipementSn(equipementSns.join(', ')); \n        setequipement(equipementIds);\n    };\n    \n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        const clients = {\n            model,\n            equipement: equipement,\n            contrat:selectedContratId,\n            service_no,\n            effective_date,\n            termination_date,\n            client:clientId,\n            quantity,\n            working_hour_start,\n            working_hour_end,\n            response_time_critical,\n            response_time_major,\n            response_time_minor\n        };\n        console.log('Sending request with data:', clients);\n\n        try {\n            const response = await fetch('/api/service/add', {\n                method: 'POST',\n                body: JSON.stringify(clients),\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n            });\n            const json = await response.json();\n            console.log(json);\n            if (!response.ok) {\n                if (json.error) {\n                    setError(json.error);\n                }\n                if (json.emptyFields) {\n                    setEmptyFields(json.emptyFields);\n                }\n            }\n            if (response.ok) {\n                setEmptyFields([]);\n                setClient('');\n                seteffective_date('');\n                settermination_date('');\n                setError(null);\n                toast.success('Service ajouté avec succès');\n                setSuccessMessage(\"Service ajouté avec succès\");\n                console.log('Request sent successfully');\n            }\n        } catch (error) {\n            console.error('Error:', error);\n            setError('Une erreur s\\'est produite lors de la soumission du formulaire.');\n        }\n    };\n\n    return (\n        <div className=\"overflow-x-auto\">\n            <ToastContainer />\n\n            <h1 className=\"text-[1.7em]  mb-2.5 mx-0 text-center font-semibold dark:text-gray-600\">Ajouter Service:</h1>\n            <div className=\"space-y-1\">\n                <div className=\"border-b border-gray-900/10 pb-12\">\n                    <div className=\"mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6\">\n                        <div className=\"sm:col-span-3 relative\">\n                            <label htmlFor=\"service_no\" className=\"block text-sm font-medium leading-6 text-gray-900 dark:text-gray-600\">Service No</label>\n                            <div >\n                                <input type=\"text\"\n                                    value={service_no}\n                                    onChange={(e) => setServiceNo(e.target.value)}\n                                    className=\"block w-full border-red-700 rounded-md border-2 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\" />\n                            </div>\n                        </div>\n                        <div className=\"sm:col-span-3\">\n                            <label htmlFor=\"contrat\" className=\"block text-sm font-medium leading-6 text-gray-900 dark:text-gray-600\">Contrat</label>\n                            <div className=\"flex\">\n                                <input\n                                    type=\"text\"\n                                    placeholder={selectedContratSn ? selectedContratSn : ''}\n                                    value={selectedContratId ? selectedContratId : ''}\n                                    onClick={openContratModal}\n                                    className=\"block w-full border-red-700 rounded-md border-2 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 cursor-pointer\"\n                                />\n\n                            </div>\n\n                        </div>\n                        <div className=\"sm:col-span-3\">\n                            <label htmlFor=\"model\" className=\"block text-sm font-medium leading-6 text-gray-900 dark:text-gray-600\">Model</label>\n                            <div >\n                                <input type=\"text\"\n                                    value={model}\n                                    onChange={(e) => setModel(e.target.value)}\n                                    className=\"block w-full border-red-700 rounded-md border-2 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\" />\n                            </div>\n                        </div>\n                        <div className=\"sm:col-span-3\">\n                            <label htmlFor=\"termination_date\" className=\"block text-sm font-medium leading-6 text-gray-900 dark:text-gray-600\">Garantie Start Date </label>\n                            <div >\n                                <input type=\"Date\"\n                                    value={effective_date}\n                                    onChange={(e) => settermination_date(e.target.value)}\n                                    className=\"block w-full border-red-700 rounded-md border-2  py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\" />\n                            </div>\n                        </div>\n                        <div className=\"sm:col-span-3\">\n                            <label htmlFor=\"equipement\" className=\"block text-sm font-medium leading-6 text-gray-900 dark:text-gray-600\">Equipement S/N</label>\n                            <div>\n                                <input\n                                    type=\"text\"\n                                    onClick={openEquipementModal}\n                                    placeholder={selectedEquipementSn }\n                                    value={selectedEquipementSn}\n                                    readOnly\n                                    className=\"block w-full border-red-700 rounded-md border-2 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 cursor-pointer\"\n                                />\n                            </div>\n                        </div>\n                        <div className=\"sm:col-span-3\">\n                            <label htmlFor=\"termination_date\" className=\"block text-sm font-medium leading-6 text-gray-900 dark:text-gray-600\">Garantie termination Date </label>\n                            <div >\n                                <input type=\"Date\"\n                                    value={termination_date}\n                                    onChange={(e) => settermination_date(e.target.value)}\n                                    className=\"block w-full border-red-700 rounded-md border-2  py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\" />\n                            </div>\n                        </div>\n                        <div className=\"sm:col-span-3\">\n                            <label htmlFor=\"quantity\" className=\"block text-sm font-medium leading-6 text-gray-900 dark:text-gray-600\">Quantité équipement</label>\n                            <div >\n                                <input type=\"number\"\n                                    value={quantity}\n                                    onChange={(e) => setquantity(e.target.value)}\n                                    className=\"block w-full border-red-700 rounded-md border-2 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\" />                    </div>\n\n                        </div>\n\n                        <div className=\"sm:col-span-3\">\n                            <label htmlFor=\"termination_date\" className=\"block text-sm font-medium leading-6 text-gray-900 dark:text-gray-600\">Client</label>\n                            <div >\n                                <input type=\"text\"\n                                    placeholder={client ? client : ''}\n                                    value={client ? client : ''}\n                                    onChange={(e) => setClient(e.target.value)}\n                                    className=\"block w-full border-red-700 rounded-md border-2  py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\" />\n                            </div>\n                        </div>\n\n                        <div className=\"sm:col-span-3\">\n                            <label htmlFor=\"termination_date\" className=\"block text-sm font-medium leading-6 text-gray-900 dark:text-gray-600\">heure de travail </label>\n                            <div className=\"flex\">\n                                <input type=\"time\"\n                                    value={working_hour_start}\n                                    onChange={(e) => setworking_hour_start(e.target.value)}\n                                    className=\"block border-red-700 rounded-md border-2  py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\" />\n\n                                <input type=\"time\"\n                                    value={working_hour_end}\n                                    onChange={(e) => setworking_hour_end(e.target.value)}\n                                    className=\"block ml-5 border-red-700 rounded-md border-2  py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\" />\n                            </div>\n                        </div>\n                        <div className=\"sm:col-span-3\">\n                            <label htmlFor=\"termination_date\" className=\"block text-sm font-medium leading-6 text-gray-900 dark:text-gray-600\">Response time </label>\n                            <div className=\"flex\">\n                                <label htmlFor=\"termination_date\" className=\"block text-sm font-medium leading-6 text-gray-900 dark:text-gray-600\">critical </label>\n                                <input type=\"number\"\n                                    value={response_time_critical}\n                                    onChange={(e) => setresponse_time_critical(e.target.value)}\n                                    className=\"ml-2 w-20 block border-red-700 rounded-md border-2  py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\" />\n                                <label htmlFor=\"termination_date\" className=\"ml-2 block text-sm font-medium leading-6 text-gray-900 dark:text-gray-600\">major </label>\n\n                                <input type=\"number\"\n                                    value={response_time_major}\n                                    onChange={(e) => setresponse_time_major(e.target.value)}\n                                    className=\"ml-2  w-20 block ml-5 border-red-700 rounded-md border-2  py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\" />\n                                <label htmlFor=\"termination_date\" className=\"ml-2 block text-sm font-medium leading-6 text-gray-900 dark:text-gray-600\">minor </label>\n\n                                <input type=\"number\"\n                                    value={response_time_minor}\n                                    onChange={(e) => setresponse_time_minor(e.target.value)}\n                                    className=\"ml-2 ml-2  w-20 block ml-5 border-red-700 rounded-md border-2  py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\" />\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div className=\"mt-4 flex items-center justify-end gap-x-6\">\n                <button type=\"button\" className=\"rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-red-300 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600\" onClick={handleSubmit}>Valider</button>\n                <button type=\"button\" className=\"rounded-md bg-indigo-900 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600\">Annuler</button>\n            </div>\n            {error && <div className=\"error border rounded mx-0 my-5 p-2.5 border-solid bg-red-300\">{error}</div>}\n            {successMessage && <div className=\"success border rounded mx-0 my-5 p-2.5 border-solid bg-green-300\">{successMessage}</div>}\n            {isModalOpen && <ContratList handleClose={closeContratModal} handleContratSelection={handleContratSelection} />}\n            {isEquipementModalOpen && <EquipementList handleClose={closeEquipementModal} handleEquipementSelection={handleEquipementSelection} />}\n\n        </div>)\n}\n\nexport default AddService"],"mappings":"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"},"metadata":{},"sourceType":"module"}