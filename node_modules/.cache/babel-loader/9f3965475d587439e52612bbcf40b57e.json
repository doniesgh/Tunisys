{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\donia\\\\Documents\\\\Tunisys\\\\src\\\\views\\\\controller\\\\tables\\\\Components\\\\modifyUser.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport { useUsersContext } from './../../../../Hooks/useUsersContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ModifyUser = _ref => {\n  _s();\n\n  let {\n    handleClose,\n    user\n  } = _ref;\n  const {\n    dispatch\n  } = useUsersContext();\n  const [firstname, setFirstname] = useState((user === null || user === void 0 ? void 0 : user.firstname) || \"\");\n  const [lastname, setLastname] = useState((user === null || user === void 0 ? void 0 : user.lastname) || \"\");\n  const [email, setEmail] = useState((user === null || user === void 0 ? void 0 : user.email) || \"\");\n  const [password, setPassword] = useState((user === null || user === void 0 ? void 0 : user.password) || \"\");\n  const [role, setRole] = useState((user === null || user === void 0 ? void 0 : user.role) || \"\");\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    const userData = {\n      firstname: firstname,\n      lastname: lastname,\n      email: email,\n      password: password,\n      role: role\n    };\n\n    if (user && user._id) {\n      try {\n        const response = await fetch(`/api/user/${user._id}`, {\n          method: \"PATCH\",\n          body: JSON.stringify(userData),\n          headers: {\n            \"Content-type\": \"application/json\"\n          }\n        });\n\n        if (!response.ok) {\n          const errorData = await response.json();\n          throw new Error(errorData.message || \"Erreur dans la modification de l'utilisateur\");\n        }\n\n        const updatedUserData = await response.json();\n        dispatch({\n          type: \"UPDATE_USER\",\n          payload: {\n            _id: user._id,\n            ...updatedUserData\n          }\n        });\n        handleClose();\n      } catch (error) {\n        console.error(error);\n      }\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed top-0 left-0 z-10 flex h-full w-full items-center justify-center\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"rounded-md bg-white p-8 border-2 shadow-lg border-tunisys-100\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"mb-4 text-xl font-semibold text-center text-tunisys-100\",\n        children: \"Modifier Utilisateur\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"flex flex-col\",\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"Nom:\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: firstname,\n            onChange: e => setFirstname(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"Pr\\xE9nom:\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: lastname,\n            onChange: e => setLastname(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"Adresse Email:\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"email\",\n            value: email,\n            onChange: e => setEmail(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"Mot de passe:\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            value: password,\n            onChange: e => setPassword(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"Role:\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: role,\n            onChange: e => setRole(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"text-indigo-00 text-green-600 text- mt-4 rounded py-2 px-4 font-bold hover:text-green-600\",\n          type: \"submit\",\n          children: \"Enregistrer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"mt-2 rounded bg-gray-500 py-2 px-4 font-bold text-white hover:bg-gray-600\",\n          type: \"button\",\n          onClick: handleClose,\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ModifyUser, \"Dyl92sPeedz7IgiLJF2NxTeadRg=\", false, function () {\n  return [useUsersContext];\n});\n\n_c = ModifyUser;\nexport default ModifyUser;\n\nvar _c;\n\n$RefreshReg$(_c, \"ModifyUser\");","map":{"version":3,"names":["React","useState","useUsersContext","ModifyUser","handleClose","user","dispatch","firstname","setFirstname","lastname","setLastname","email","setEmail","password","setPassword","role","setRole","handleSubmit","e","preventDefault","userData","_id","response","fetch","method","body","JSON","stringify","headers","ok","errorData","json","Error","message","updatedUserData","type","payload","error","console","target","value"],"sources":["C:/Users/donia/Documents/Tunisys/src/views/controller/tables/Components/modifyUser.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useUsersContext } from './../../../../Hooks/useUsersContext';\n\nconst ModifyUser = ({ handleClose, user }) => {\n  const { dispatch } = useUsersContext();\n  const [firstname, setFirstname] = useState(user?.firstname || \"\");\n  const [lastname, setLastname] = useState(user?.lastname || \"\");\n  const [email, setEmail] = useState(user?.email || \"\");\n  const [password, setPassword] = useState(user?.password || \"\");\n  const [role, setRole] = useState(user?.role || \"\");\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n  \n    const userData = {\n      firstname: firstname,\n      lastname: lastname,\n      email: email,\n      password: password,\n      role : role\n    };\n    if (user && user._id) {\n      try {\n        const response = await fetch(`/api/user/${user._id}`, {\n          method: \"PATCH\",\n          body: JSON.stringify(userData),\n          headers: {\n            \"Content-type\": \"application/json\",\n          },\n        });\n  \n        if (!response.ok) {\n          const errorData = await response.json();\n          throw new Error(errorData.message || \"Erreur dans la modification de l'utilisateur\");\n        }\n  \n        const updatedUserData = await response.json();\n        dispatch({\n          type: \"UPDATE_USER\",\n          payload: { _id: user._id, ...updatedUserData },\n        });\n  \n        handleClose();\n      } catch (error) {\n        console.error(error);\n      }\n    }\n  }; \n  return (\n    <div className=\"fixed top-0 left-0 z-10 flex h-full w-full items-center justify-center\">\n      <div className=\"rounded-md bg-white p-8 border-2 shadow-lg border-tunisys-100\">\n        <h2 className=\"mb-4 text-xl font-semibold text-center text-tunisys-100\">Modifier Utilisateur</h2>\n        <form className=\"flex flex-col\" onSubmit={handleSubmit}>\n          <label>\n            Nom:\n            <input\n              type=\"text\"\n              value={firstname}\n              onChange={(e) => setFirstname(e.target.value)}\n            />\n          </label>\n          <label>\n          Pr√©nom:\n            <input\n              type=\"text\"\n              value={lastname}\n              onChange={(e) => setLastname(e.target.value)}\n            />\n          </label>\n          <label>\n           Adresse Email:\n            <input\n              type=\"email\"\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n            />\n          </label>\n          <label>\n          Mot de passe:\n            <input\n              type=\"password\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n            />\n          </label>\n          <label>\n            Role:\n            <input\n              type=\"text\"\n              value={role}\n              onChange={(e) => setRole(e.target.value)}\n            />\n          </label>\n          <button\n            className=\"text-indigo-00 text-green-600 text- mt-4 rounded py-2 px-4 font-bold hover:text-green-600\"\n            type=\"submit\"\n          >\n            Enregistrer\n          </button>\n          <button\n            className=\"mt-2 rounded bg-gray-500 py-2 px-4 font-bold text-white hover:bg-gray-600\"\n            type=\"button\"\n            onClick={handleClose}\n          >\n            Cancel\n          </button>\n        </form>\n      </div>\n    </div>\n  );\n  \n};\n\nexport default ModifyUser;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}