{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\donia\\\\Documents\\\\Tunisys\\\\src\\\\views\\\\controller\\\\tables\\\\Components\\\\addUser.jsx\",\n    _s = $RefreshSig$();\n\nimport { useState } from \"react\";\nimport { useUsersContext } from './../../../../Hooks/useUsersContext';\nimport { toast, ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css'; //import { useAuthContext } from 'views/auth/hooks/useAuthContext';\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst UserForm = () => {\n  _s();\n\n  const {\n    dispatch\n  } = useUsersContext(); // const {user} = useAuthContext()\n\n  const [firstname, setFirstname] = useState('');\n  const [lastname, setLastname] = useState('');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [role, setRole] = useState('');\n  const [error, setError] = useState(null);\n  const [emptyFields, setEmptyFields] = useState([]);\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    const users = {\n      firstname,\n      lastname,\n      email,\n      password,\n      role\n    };\n    const response = await fetch('/api/user/add', {\n      method: 'POST',\n      body: JSON.stringify(users),\n      headers: {\n        'Content-type': 'application/json' //'Authorization' :`Bearer ${user.token}`\n\n      }\n    });\n    const json = await response.json();\n\n    if (!response.ok) {\n      setError(json.error);\n      setEmptyFields(json.emptyFields || []); // Provide a default empty array if emptyFields is not present\n    }\n\n    if (response.ok) {\n      setEmptyFields([]);\n      setFirstname('');\n      setLastname('');\n      setEmail('');\n      setPassword('');\n      setRole('');\n      setError(null);\n      dispatch({\n        type: 'CREATE_USER',\n        payload: json\n      });\n      console.log('un nouveau utilisateur est ajouté', json);\n      toast.success('Utilisateur ajouté avec succès');\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(ToastContainer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"create block mt-6\",\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-2xl  mt-10 mb-2.5 mx-0 text-center font-semibold dark:text-gray-600\",\n        children: \"Ajouter utilisateur :\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"block dark:text-gray-600 text-xl\",\n        children: \"Nom :\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: `block w-full border rounded box-border mt-2.5 mb-5 p-2.5 border-solid ${emptyFields.includes('firstname') ? 'border-red-500' : 'border-[#ddd]'}`,\n        type: \"text\",\n        value: firstname,\n        autoComplete: \"firsttname\",\n        onChange: e => setFirstname(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"block dark:text-gray-600 text-2xl\",\n        children: \"Pr\\xE9nom :\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: `block w-full border rounded box-border mt-2.5 mb-5 p-2.5 border-solid ${emptyFields.includes('lastname') ? 'border-red-500' : 'border-[#ddd]'}`,\n        type: \"text\",\n        value: lastname,\n        autoComplete: \"lastname\",\n        onChange: e => setLastname(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"block dark:text-gray-600 text-2xl\",\n        children: \"Adresse email:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: `block w-full border rounded box-border mt-2.5 mb-5 p-2.5 border-solid ${emptyFields.includes('email') ? 'border-red-500' : 'border-[#ddd]'}`,\n        type: \"email\",\n        autoComplete: \"email\",\n        value: email,\n        onChange: e => setEmail(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"block dark:text-gray-600 text-2xl\",\n        children: \"Mot de passe :\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: `block w-full border rounded box-border mt-2.5 mb-5 p-2.5 border-solid ${emptyFields.includes('password') ? 'border-red-500' : 'border-[#ddd]'}`,\n        type: \"password\",\n        autoComplete: \"current-password\",\n        value: password,\n        onChange: e => setPassword(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"block dark:text-gray-600 text-2xl\",\n        children: \"R\\xF4le :\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        className: `block w-full border rounded box-border mt-2.5 mb-5 p-2.5 border-solid ${emptyFields.includes('role') ? 'border-red-500' : 'border-[#ddd]'}\n  `,\n        value: role,\n        onChange: e => setRole(e.target.value),\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"null\",\n          children: \"Null\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"TECHNICIEB\",\n          children: \"Technicien\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"HELPDESK\",\n          children: \"Help desk\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"CLIENT\",\n          children: \"Client\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"COORDINATRICE\",\n          children: \"Service Manager\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"COORDINATRICE\",\n          children: \"Coordinateur/Coordinatrice de service\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"text-white rounded cursor-pointer p-2.5 border-0 bg-tunisys-100 justify-center text-xl\",\n        children: \"Ajouter utilisateur\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 17\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error border rounded mx-0 my-5 p-2.5 border-solid bg-red-300\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 27\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 9\n  }, this);\n};\n\n_s(UserForm, \"cNdfHVPfLSa3A8yWW2gketTBfXU=\", false, function () {\n  return [useUsersContext];\n});\n\n_c = UserForm;\nexport default UserForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserForm\");","map":{"version":3,"names":["useState","useUsersContext","toast","ToastContainer","UserForm","dispatch","firstname","setFirstname","lastname","setLastname","email","setEmail","password","setPassword","role","setRole","error","setError","emptyFields","setEmptyFields","handleSubmit","e","preventDefault","users","response","fetch","method","body","JSON","stringify","headers","json","ok","type","payload","console","log","success","includes","target","value"],"sources":["C:/Users/donia/Documents/Tunisys/src/views/controller/tables/Components/addUser.jsx"],"sourcesContent":["import { useState } from \"react\"\nimport { useUsersContext } from './../../../../Hooks/useUsersContext';\nimport { toast, ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n//import { useAuthContext } from 'views/auth/hooks/useAuthContext';\n\nconst UserForm = () => {\n    const { dispatch } = useUsersContext()\n   // const {user} = useAuthContext()\n    const [firstname, setFirstname] = useState('')\n    const [lastname, setLastname] = useState('')\n    const [email, setEmail] = useState('')\n    const [password, setPassword] = useState('')\n    const [role, setRole] = useState('')\n    const [error, setError] = useState(null)\n    const [emptyFields, setEmptyFields] = useState([]);\n\n    const handleSubmit = async (e) => {\n        e.preventDefault()\n        const users = { firstname, lastname, email, password, role }\n        const response = await fetch('/api/user/add', {\n            method: 'POST',\n            body: JSON.stringify(users),\n            headers: {\n                'Content-type': 'application/json',\n                //'Authorization' :`Bearer ${user.token}`\n            }\n        })\n        const json = await response.json()\n        if (!response.ok) {\n            setError(json.error)\n            setEmptyFields(json.emptyFields || []) // Provide a default empty array if emptyFields is not present\n        }\n        if (response.ok) {\n            setEmptyFields([])\n            setFirstname('')\n            setLastname('')\n            setEmail('')\n            setPassword('')\n            setRole('')\n            setError(null)\n            dispatch({ type: 'CREATE_USER', payload: json })\n            console.log('un nouveau utilisateur est ajouté', json)\n            toast.success('Utilisateur ajouté avec succès');\n        }\n    }\n    \n    return (\n        <div>\n            <ToastContainer />\n            <form className=\"create block mt-6\" onSubmit={handleSubmit}>\n                <h1 className=\"text-2xl  mt-10 mb-2.5 mx-0 text-center font-semibold dark:text-gray-600\">Ajouter utilisateur :</h1>\n                <label className=\"block dark:text-gray-600 text-xl\">Nom :</label>\n                <input className={`block w-full border rounded box-border mt-2.5 mb-5 p-2.5 border-solid ${emptyFields.includes('firstname') ? 'border-red-500' : 'border-[#ddd]'\n                    }`} type=\"text\"\n                    value={firstname}\n                    autoComplete=\"firsttname\"\n                    onChange={(e) => setFirstname(e.target.value)}\n\n                />\n                <label className=\"block dark:text-gray-600 text-2xl\">Prénom :</label>\n                <input className={`block w-full border rounded box-border mt-2.5 mb-5 p-2.5 border-solid ${emptyFields.includes('lastname') ? 'border-red-500' : 'border-[#ddd]'\n                    }`} type=\"text\"\n                    value={lastname}\n                    autoComplete=\"lastname\"\n                    onChange={(e) => setLastname(e.target.value)}\n\n                />\n                <label className=\"block dark:text-gray-600 text-2xl\">Adresse email:</label>\n                <input className={`block w-full border rounded box-border mt-2.5 mb-5 p-2.5 border-solid ${emptyFields.includes('email') ? 'border-red-500' : 'border-[#ddd]'\n                    }`} type=\"email\"\n                    autoComplete=\"email\"\n                    value={email}\n                    onChange={(e) => setEmail(e.target.value)}\n                />\n                <label className=\"block dark:text-gray-600 text-2xl\">Mot de passe :</label>\n                <input className={`block w-full border rounded box-border mt-2.5 mb-5 p-2.5 border-solid ${emptyFields.includes('password') ? 'border-red-500' : 'border-[#ddd]'\n                    }`} type=\"password\"\n                    autoComplete=\"current-password\"\n                    value={password}\n                    onChange={(e) => setPassword(e.target.value)}\n                />\n                <label className=\"block dark:text-gray-600 text-2xl\">Rôle :</label>\n                <select\n                    className={`block w-full border rounded box-border mt-2.5 mb-5 p-2.5 border-solid ${emptyFields.includes('role') ? 'border-red-500' : 'border-[#ddd]'}\n  `} value={role}\n                    onChange={(e) => setRole(e.target.value)}\n                >\n                    <option value=\"null\">Null</option>\n\n                    <option value=\"TECHNICIEB\">Technicien</option>\n                    <option value=\"HELPDESK\">Help desk</option>\n                    <option value=\"CLIENT\">Client</option>\n                    <option value=\"COORDINATRICE\">Service Manager</option>\n                    <option value=\"COORDINATRICE\">Coordinateur/Coordinatrice de service</option>\n                </select>\n                <button className=\"text-white rounded cursor-pointer p-2.5 border-0 bg-tunisys-100 justify-center text-xl\">Ajouter utilisateur</button>\n                {error && <div className=\"error border rounded mx-0 my-5 p-2.5 border-solid bg-red-300\">{error}</div>}\n            </form>\n        </div>\n    )\n}\nexport default UserForm;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}