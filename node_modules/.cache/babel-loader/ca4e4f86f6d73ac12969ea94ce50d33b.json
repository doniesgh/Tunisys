{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\donia\\\\Documents\\\\Tunisys\\\\src\\\\layouts\\\\Controller\\\\index.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { Routes, Route, Navigate, useLocation } from \"react-router-dom\";\nimport Navbar from \"components/navbar\";\nimport ControllerSidebar from \"components/sidebar/controllersidebar\";\nimport Footer from \"components/footer/Footer\";\nimport croutes from \"../../Routes/croutes\";\nimport { useAuthContext } from 'views/auth/hooks/useAuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Controller(props) {\n  _s();\n\n  const {\n    user\n  } = useAuthContext();\n  const { ...rest\n  } = props;\n  const location = useLocation();\n  const [open, setOpen] = React.useState(true);\n  const [currentRoute, setCurrentRoute] = React.useState(\"Main Dashboard\");\n  const [socket, setSocket] = useState(null);\n  React.useEffect(() => {\n    window.addEventListener(\"resize\", () => window.innerWidth < 1200 ? setOpen(false) : setOpen(true));\n  }, []);\n  React.useEffect(() => {\n    getActiveRoute(croutes);\n  }, [location.pathname]);\n\n  const getActiveRoute = routes => {\n    let activeRoute = \"Main Dashboard\";\n\n    for (let i = 0; i < routes.length; i++) {\n      if (window.location.href.indexOf(routes[i].layout + \"/\" + routes[i].path) !== -1) {\n        setCurrentRoute(routes[i].name);\n      }\n    }\n\n    return activeRoute;\n  };\n\n  const getActiveNavbar = routes => {\n    let activeNavbar = false;\n\n    for (let i = 0; i < routes.length; i++) {\n      if (window.location.href.indexOf(routes[i].layout + routes[i].path) !== -1) {\n        return routes[i].secondary;\n      }\n    }\n\n    return activeNavbar;\n  };\n\n  const getRoutes = croutes => {\n    return croutes.map((prop, key) => {\n      if (prop.layout === \"/manager\") {\n        // Add a conditional check for allowed roles\n        if (user && prop.allowedRoles.includes(user.role)) {\n          return /*#__PURE__*/_jsxDEV(Route, {\n            path: `/${prop.path}`,\n            element: prop.component\n          }, key, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 18\n          }, this);\n        } else {\n          // Optionally, you can redirect to a different page if the user's role is not allowed\n          return /*#__PURE__*/_jsxDEV(Navigate, {\n            to: \"/noaccess\"\n          }, key, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 18\n          }, this);\n        }\n      } else {\n        return null;\n      }\n    });\n  };\n\n  document.documentElement.dir = \"ltr\";\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex h-full w-full\",\n    children: [/*#__PURE__*/_jsxDEV(ControllerSidebar, {\n      open: open,\n      onClose: () => setOpen(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"h-full w-full bg-lightPrimary dark:!bg-navy-900\",\n      children: /*#__PURE__*/_jsxDEV(\"main\", {\n        className: `mx-[12px] h-full flex-none transition-all md:pr-2 xl:ml-[313px]`,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"h-full\",\n          children: [/*#__PURE__*/_jsxDEV(Navbar, {\n            onOpenSidenav: () => setOpen(true),\n            logoText: \"\",\n            brandText: currentRoute,\n            secondary: getActiveNavbar(croutes),\n            ...rest,\n            socket: socket\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"pt-5s mx-auto mb-auto h-full min-h-[84vh] p-2 md:pr-2\",\n            children: /*#__PURE__*/_jsxDEV(Routes, {\n              children: [getRoutes(croutes), /*#__PURE__*/_jsxDEV(Route, {\n                path: \"/\",\n                element: /*#__PURE__*/_jsxDEV(Navigate, {\n                  to: \"/manager/default\",\n                  replace: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 91,\n                  columnNumber: 28\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 89,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-3\",\n            children: /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Controller, \"YUirY3la/MvD64FtE4J7hjEVODc=\", false, function () {\n  return [useAuthContext, useLocation];\n});\n\n_c = Controller;\n\nvar _c;\n\n$RefreshReg$(_c, \"Controller\");","map":{"version":3,"names":["React","useState","useEffect","Routes","Route","Navigate","useLocation","Navbar","ControllerSidebar","Footer","croutes","useAuthContext","Controller","props","user","rest","location","open","setOpen","currentRoute","setCurrentRoute","socket","setSocket","window","addEventListener","innerWidth","getActiveRoute","pathname","routes","activeRoute","i","length","href","indexOf","layout","path","name","getActiveNavbar","activeNavbar","secondary","getRoutes","map","prop","key","allowedRoles","includes","role","component","document","documentElement","dir"],"sources":["C:/Users/donia/Documents/Tunisys/src/layouts/Controller/index.jsx"],"sourcesContent":["import React,{useState,useEffect} from \"react\";\nimport { Routes, Route, Navigate, useLocation } from \"react-router-dom\";\nimport Navbar from \"components/navbar\";\nimport ControllerSidebar from \"components/sidebar/controllersidebar\";\nimport Footer from \"components/footer/Footer\";\nimport croutes from \"../../Routes/croutes\";\nimport {useAuthContext} from 'views/auth/hooks/useAuthContext'\n\nexport default function Controller(props) {\n  const {user}  = useAuthContext()\n  const { ...rest } = props;\n  const location = useLocation();\n  const [open, setOpen] = React.useState(true);\n  const [currentRoute, setCurrentRoute] = React.useState(\"Main Dashboard\");\n  const [socket,setSocket] = useState(null)\n  \n  React.useEffect(() => {\n    window.addEventListener(\"resize\", () =>\n      window.innerWidth < 1200 ? setOpen(false) : setOpen(true)\n    );\n  }, []);\n  React.useEffect(() => {\n    getActiveRoute(croutes);\n  }, [location.pathname]);\n\n  const getActiveRoute = (routes) => {\n    let activeRoute = \"Main Dashboard\";\n    for (let i = 0; i < routes.length; i++) {\n      if (\n        window.location.href.indexOf(\n          routes[i].layout + \"/\" + routes[i].path\n        ) !== -1\n      ) {\n        setCurrentRoute(routes[i].name);\n      }\n    }\n    return activeRoute;\n  };\n  const getActiveNavbar = (routes) => {\n    let activeNavbar = false;\n    for (let i = 0; i < routes.length; i++) {\n      if (\n        window.location.href.indexOf(routes[i].layout + routes[i].path) !== -1\n      ) {\n        return routes[i].secondary;\n      }\n    }\n    return activeNavbar;\n  };\n\n  const getRoutes = (croutes) => {\n    return croutes.map((prop, key) => {\n      if (prop.layout === \"/manager\") {\n        // Add a conditional check for allowed roles\n        if (user &&\n          prop.allowedRoles.includes(user.role)) {\n          return <Route path={`/${prop.path}`} element={prop.component} key={key} />;\n        } else {\n          // Optionally, you can redirect to a different page if the user's role is not allowed\n          return <Navigate to=\"/noaccess\" key={key} />;\n        }\n      } else {\n        return null;\n      }\n    });\n  };\n\n  document.documentElement.dir = \"ltr\";\n  return (\n    <div className=\"flex h-full w-full\">\n      <ControllerSidebar open={open} onClose={() => setOpen(false)} />\n      <div className=\"h-full w-full bg-lightPrimary dark:!bg-navy-900\">\n        <main\n          className={`mx-[12px] h-full flex-none transition-all md:pr-2 xl:ml-[313px]`}\n        >\n          <div className=\"h-full\">\n            <Navbar\n              onOpenSidenav={() => setOpen(true)}\n              logoText={\"\"}\n              brandText={currentRoute}\n              secondary={getActiveNavbar(croutes)}\n              {...rest}\n              socket ={socket}\n            />\n            <div className=\"pt-5s mx-auto mb-auto h-full min-h-[84vh] p-2 md:pr-2\">\n              <Routes>\n                {getRoutes(croutes)}\n\n                <Route\n                  path=\"/\"\n                  element={<Navigate to=\"/manager/default\" replace />}\n                />\n              </Routes>\n            </div>\n            <div className=\"p-3\">\n              <Footer />\n            </div>\n          </div>\n        </main>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}