{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\donia\\\\Documents\\\\Tunisys\\\\src\\\\views\\\\technicien\\\\intervention\\\\intervention.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { useAuthContext } from 'views/auth/hooks/useAuthContext';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { toast, ToastContainer } from 'react-toastify';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Intervention = _ref => {\n  _s();\n\n  let {\n    handleClose,\n    reclamation\n  } = _ref;\n  const {\n    user\n  } = useAuthContext();\n  const [numRapport, setNumRapport] = useState(reclamation === null || reclamation === void 0 ? void 0 : reclamation.idn);\n  const [client, setClient] = useState((reclamation === null || reclamation === void 0 ? void 0 : reclamation.client) || \"\");\n  const [type, setType] = useState((reclamation === null || reclamation === void 0 ? void 0 : reclamation.type) || \"\");\n  const [dateDebut, setDateDebut] = useState((reclamation === null || reclamation === void 0 ? void 0 : reclamation.createdAt) || \"\");\n  const [dateFin, setDateFin] = useState(new Date().toISOString().slice(0, 16));\n  const [description, setDescription] = useState((reclamation === null || reclamation === void 0 ? void 0 : reclamation.description) || \"\");\n  const [reclamations, setReclamations] = useState([]);\n  const [error, setError] = useState('');\n\n  const add = async e => {\n    e.preventDefault();\n\n    try {\n      const intervention = {\n        numRapport,\n        type,\n        client,\n        dateDebut,\n        dateFin,\n        description\n      };\n      const response = await fetch('/api/inter/add', {\n        method: 'POST',\n        body: JSON.stringify(intervention),\n        headers: {\n          'Content-type': 'application/json',\n          'Authorization': `Bearer ${user.token}`\n        }\n      });\n      const json = await response.json();\n\n      if (response.ok) {\n        console.log('Intervention created:', json);\n        toast.success('Fiche Intervention CrÃ©e');\n        handleClose();\n      } else {\n        console.error('Error:', json);\n        setError(json.error);\n      }\n    } catch (error) {\n      console.error('Error:', error);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed top-0 left-0 z-10 flex h-full w-full items-center justify-center\",\n    children: [/*#__PURE__*/_jsxDEV(ToastContainer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"rounded-md bg-white p-8 border-2 shadow-lg border-tunisys-100\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"mb-4 text-xl font-semibold text-center text-tunisys-100\",\n        children: \"Veuillez remplir la fiche intervention\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"flex flex-col\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"Num\\xE9ro Rapport:\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: numRapport,\n            onChange: e => setNumRapport(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"Client:\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: client,\n            onChange: e => setClient(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"Panne:\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: type,\n            onChange: e => setType(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"Date D\\xE9but:\", /*#__PURE__*/_jsxDEV(\"input\", {\n            readOnly: true,\n            type: \"datetime-local\",\n            value: reclamation && reclamation.createdAt ? new Date(reclamation.createdAt).toISOString().slice(0, 16) : \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"Date Fin\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"datetime-local\",\n            value: new Date().toISOString().slice(0, 16),\n            onChange: e => setDateFin(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"Description:\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: description,\n            onChange: e => setDescription(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 11\n        }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"error border rounded mx-0 my-5 p-2.5 border-solid bg-red-300\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"text-indigo-00 text-green-600 text- mt-4 rounded py-2 px-4 font-bold hover:text-green-600\",\n          type: \"submit\",\n          onClick: add,\n          children: \"Finaliser\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"mt-2 rounded bg-gray-500 py-2 px-4 font-bold text-white hover:bg-gray-600\",\n          type: \"button\",\n          onClick: handleClose,\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Intervention, \"B1S5YeyDObtdKOneK7qRUbTr1KA=\", false, function () {\n  return [useAuthContext];\n});\n\n_c = Intervention;\nexport default Intervention;\n\nvar _c;\n\n$RefreshReg$(_c, \"Intervention\");","map":{"version":3,"names":["React","useState","useAuthContext","toast","ToastContainer","Intervention","handleClose","reclamation","user","numRapport","setNumRapport","idn","client","setClient","type","setType","dateDebut","setDateDebut","createdAt","dateFin","setDateFin","Date","toISOString","slice","description","setDescription","reclamations","setReclamations","error","setError","add","e","preventDefault","intervention","response","fetch","method","body","JSON","stringify","headers","token","json","ok","console","log","success","target","value"],"sources":["C:/Users/donia/Documents/Tunisys/src/views/technicien/intervention/intervention.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useAuthContext } from 'views/auth/hooks/useAuthContext';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { toast, ToastContainer } from 'react-toastify';\nconst Intervention = ({ handleClose, reclamation }) => {\nconst { user } = useAuthContext();\nconst [numRapport, setNumRapport] = useState(reclamation?.idn);\nconst [client, setClient] = useState(reclamation?.client || \"\");\nconst [type, setType] = useState(reclamation?.type || \"\");\nconst [dateDebut, setDateDebut] = useState(reclamation?.createdAt || \"\");\nconst [dateFin, setDateFin] = useState(new Date().toISOString().slice(0, 16));\nconst [description, setDescription] = useState(reclamation?.description || \"\");\nconst [reclamations, setReclamations] = useState([]);\nconst [error, setError] = useState('');\n  const add = async (e) => {\n    e.preventDefault();\n    try {\n      const intervention = {\n        numRapport,\n        type,\n        client,\n        dateDebut,\n        dateFin,\n        description\n      };\n  \n      const response = await fetch('/api/inter/add', {\n        method: 'POST',\n        body: JSON.stringify(intervention),\n        headers: {\n          'Content-type': 'application/json',\n          'Authorization': `Bearer ${user.token}`\n\n        }\n      });\n  \n      const json = await response.json();\n  \n      if (response.ok) {\n        console.log('Intervention created:', json);\n        toast.success('Fiche Intervention CrÃ©e');\n        handleClose();\n      } else {\n        console.error('Error:', json);\n        setError(json.error);\n      }\n    } catch (error) {\n      console.error('Error:', error);\n    }\n  }\n  \n\n  return (\n\n    <div className=\"fixed top-0 left-0 z-10 flex h-full w-full items-center justify-center\">\n      <ToastContainer />\n      <div className=\"rounded-md bg-white p-8 border-2 shadow-lg border-tunisys-100\">\n        <h2 className=\"mb-4 text-xl font-semibold text-center text-tunisys-100\">Veuillez remplir la fiche intervention</h2>\n        <form className=\"flex flex-col\">\n          <label>\n            NumÃ©ro Rapport:\n            <input\n              type=\"text\"\n              value={numRapport}\n              onChange={(e) => setNumRapport(e.target.value)}\n            />\n          </label>\n          <label>\n            Client:\n            <input\n              type=\"text\"\n              value={client}\n              onChange={(e) => setClient(e.target.value)}\n            />\n          </label>\n          <label>\n            Panne:\n            <input\n              type=\"text\"\n              value={type}\n              onChange={(e) => setType(e.target.value)}\n            />\n          </label>\n          <label>\n            Date DÃ©but:\n            <input\n              readOnly\n              type=\"datetime-local\"\n              value={reclamation && reclamation.createdAt ? new Date(reclamation.createdAt).toISOString().slice(0, 16) : \"\"}\n            />\n          </label>\n          <label>\n            Date Fin\n            <input\n              type=\"datetime-local\"\n              value={new Date().toISOString().slice(0, 16)}\n              onChange={(e) => setDateFin(e.target.value)}\n            />\n          </label>\n          <label>\n            Description:\n            <input\n              type=\"text\"\n              value={description}\n              onChange={(e) => setDescription(e.target.value)}\n            />\n          </label>\n          {error && <div className=\"error border rounded mx-0 my-5 p-2.5 border-solid bg-red-300\">{error}</div>}\n\n          <button\n            className=\"text-indigo-00 text-green-600 text- mt-4 rounded py-2 px-4 font-bold hover:text-green-600\"\n            type=\"submit\" onClick={add}>\n            Finaliser\n          </button>\n          <button\n            className=\"mt-2 rounded bg-gray-500 py-2 px-4 font-bold text-white hover:bg-gray-600\"\n            type=\"button\"\n            onClick={handleClose}\n          >\n            Cancel\n          </button>\n        </form>\n      </div>\n    </div>\n  );\n}\n\nexport default Intervention;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}