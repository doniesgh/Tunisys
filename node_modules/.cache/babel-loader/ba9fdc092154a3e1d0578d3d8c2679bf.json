{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\donia\\\\Documents\\\\Tunisys\\\\src\\\\layouts\\\\admin\\\\index.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { Routes, Route, Navigate, useLocation } from \"react-router-dom\";\nimport Navbar from \"components/navbar\";\nimport Sidebar from \"components/sidebar\";\nimport Footer from \"components/footer/Footer\";\nimport routes from \"../../Routes/routes\";\nimport { useAuthContext } from 'views/auth/hooks/useAuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Admin(props) {\n  _s();\n\n  const {\n    user\n  } = useAuthContext();\n  const { ...rest\n  } = props;\n  const location = useLocation();\n  const [open, setOpen] = React.useState(true);\n  const [currentRoute, setCurrentRoute] = React.useState(\"Main Dashboard\");\n  const [socket, setSocket] = useState(null);\n  React.useEffect(() => {\n    window.addEventListener(\"resize\", () => window.innerWidth < 1200 ? setOpen(false) : setOpen(true));\n  }, []);\n  React.useEffect(() => {\n    getActiveRoute(routes);\n  }, [location.pathname]);\n\n  const getActiveRoute = routes => {\n    let activeRoute = \"Main Dashboard\";\n\n    for (let i = 0; i < routes.length; i++) {\n      if (window.location.href.indexOf(routes[i].layout + \"/\" + routes[i].path) !== -1) {\n        setCurrentRoute(routes[i].name);\n      }\n    }\n\n    return activeRoute;\n  };\n\n  const getActiveNavbar = routes => {\n    let activeNavbar = false;\n\n    for (let i = 0; i < routes.length; i++) {\n      if (window.location.href.indexOf(routes[i].layout + routes[i].path) !== -1) {\n        return routes[i].secondary;\n      }\n    }\n\n    return activeNavbar;\n  };\n\n  const getRoutes = routes => {\n    return routes.map((prop, key) => {\n      if (prop.layout === \"/admin\") {\n        // Add a conditional check for allowed roles\n        if (user && user.role && prop.allowedRoles && prop.allowedRoles.includes(user.role)) {\n          return /*#__PURE__*/_jsxDEV(Route, {\n            path: `/${prop.path}`,\n            element: prop.component\n          }, key, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 18\n          }, this);\n        } else {\n          // Optionally, you can redirect to a different page if the user's role is not allowed\n          return /*#__PURE__*/_jsxDEV(Navigate, {\n            to: \"/noaccess\"\n          }, key, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 18\n          }, this);\n        }\n      } else {\n        return null;\n      }\n    });\n  };\n\n  document.documentElement.dir = \"ltr\";\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex h-full w-full\",\n    children: [/*#__PURE__*/_jsxDEV(Sidebar, {\n      open: open,\n      onClose: () => setOpen(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"h-full w-full bg-lightPrimary dark:!bg-navy-900\",\n      children: /*#__PURE__*/_jsxDEV(\"main\", {\n        className: `mx-[12px] h-full flex-none transition-all md:pr-2 xl:ml-[313px]`,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"h-full\",\n          children: [/*#__PURE__*/_jsxDEV(Navbar, {\n            onOpenSidenav: () => setOpen(true),\n            logoText: \"\",\n            brandText: currentRoute,\n            secondary: getActiveNavbar(routes),\n            ...rest\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"pt-5s mx-auto mb-auto h-full min-h-[84vh] p-2 md:pr-2\",\n            children: /*#__PURE__*/_jsxDEV(Routes, {\n              children: [getRoutes(routes), /*#__PURE__*/_jsxDEV(Route, {\n                path: \"/\",\n                element: /*#__PURE__*/_jsxDEV(Navigate, {\n                  to: \"/admin/default\",\n                  replace: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 95,\n                  columnNumber: 28\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 93,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-3\",\n            children: /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Admin, \"YUirY3la/MvD64FtE4J7hjEVODc=\", false, function () {\n  return [useAuthContext, useLocation];\n});\n\n_c = Admin;\n\nvar _c;\n\n$RefreshReg$(_c, \"Admin\");","map":{"version":3,"names":["React","useState","useEffect","Routes","Route","Navigate","useLocation","Navbar","Sidebar","Footer","routes","useAuthContext","Admin","props","user","rest","location","open","setOpen","currentRoute","setCurrentRoute","socket","setSocket","window","addEventListener","innerWidth","getActiveRoute","pathname","activeRoute","i","length","href","indexOf","layout","path","name","getActiveNavbar","activeNavbar","secondary","getRoutes","map","prop","key","role","allowedRoles","includes","component","document","documentElement","dir"],"sources":["C:/Users/donia/Documents/Tunisys/src/layouts/admin/index.jsx"],"sourcesContent":["import React,{useState,useEffect} from \"react\";\nimport { Routes, Route, Navigate, useLocation } from \"react-router-dom\";\nimport Navbar from \"components/navbar\";\nimport Sidebar from \"components/sidebar\";\nimport Footer from \"components/footer/Footer\";\nimport routes from \"../../Routes/routes\";\nimport {useAuthContext} from 'views/auth/hooks/useAuthContext'\n\nexport default function Admin(props) {\n  const {user}  = useAuthContext()\n  const { ...rest } = props;\n  const location = useLocation();\n  const [open, setOpen] = React.useState(true);\n  const [currentRoute, setCurrentRoute] = React.useState(\"Main Dashboard\");\n  const [socket,setSocket] = useState(null)\n  React.useEffect(() => {\n    window.addEventListener(\"resize\", () =>\n      window.innerWidth < 1200 ? setOpen(false) : setOpen(true)\n    );\n  }, []);\n  React.useEffect(() => {\n    getActiveRoute(routes);\n  }, [location.pathname]);\n\n  const getActiveRoute = (routes) => {\n    let activeRoute = \"Main Dashboard\";\n    for (let i = 0; i < routes.length; i++) {\n      if (\n        window.location.href.indexOf(\n          routes[i].layout + \"/\" + routes[i].path\n        ) !== -1\n      ) {\n        setCurrentRoute(routes[i].name);\n      }\n    }\n    return activeRoute;\n  };\n  const getActiveNavbar = (routes) => {\n    let activeNavbar = false;\n    for (let i = 0; i < routes.length; i++) {\n      if (\n        window.location.href.indexOf(routes[i].layout + routes[i].path) !== -1\n      ) {\n        return routes[i].secondary;\n      }\n    }\n    return activeNavbar;\n  };\n  const getRoutes = (routes) => {\n    return routes.map((prop, key) => {\n      if (prop.layout === \"/admin\") {\n        // Add a conditional check for allowed roles\n        if (user &&\n          user.role &&\n          prop.allowedRoles &&\n          prop.allowedRoles.includes(user.role)) {\n            \n          return <Route path={`/${prop.path}`} element={prop.component} key={key} />;\n        } else {\n          // Optionally, you can redirect to a different page if the user's role is not allowed\n          return <Navigate to=\"/noaccess\" key={key} />;\n        }\n      } else {\n        return null;\n      }\n    });\n  };\n\n  \n  document.documentElement.dir = \"ltr\";\n  return (\n    <div className=\"flex h-full w-full\">\n      <Sidebar open={open} onClose={() => setOpen(false)} />\n      {/* Navbar & Main Content */}\n      <div className=\"h-full w-full bg-lightPrimary dark:!bg-navy-900\">\n        {/* Main Content */}\n        <main\n          className={`mx-[12px] h-full flex-none transition-all md:pr-2 xl:ml-[313px]`}\n        >\n          {/* Routes */}\n          <div className=\"h-full\">\n            <Navbar\n              onOpenSidenav={() => setOpen(true)}\n              logoText={\"\"}\n              brandText={currentRoute}\n              secondary={getActiveNavbar(routes)}\n              {...rest}\n            />\n            <div className=\"pt-5s mx-auto mb-auto h-full min-h-[84vh] p-2 md:pr-2\">\n              <Routes>\n                {getRoutes(routes)}\n\n                <Route\n                  path=\"/\"\n                  element={<Navigate to=\"/admin/default\" replace />}\n                />\n              </Routes>\n            </div>\n            <div className=\"p-3\">\n              <Footer />\n            </div>\n          </div>\n        </main>\n      </div>\n    </div>\n  );\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}