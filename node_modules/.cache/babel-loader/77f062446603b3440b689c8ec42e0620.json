{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\donia\\\\Documents\\\\Tunisys\\\\src\\\\views\\\\admin\\\\client\\\\composants\\\\addAgence.jsx\",\n    _s = $RefreshSig$();\n\nimport Card from 'components/card';\nimport React, { useEffect, useState } from 'react';\nimport { useAuthContext } from 'views/auth/hooks/useAuthContext';\nimport { useParams } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst AddAgence = _ref => {\n  _s();\n\n  let {\n    handleClose,\n    client\n  } = _ref;\n  const {\n    clientId\n  } = useParams();\n  const {\n    user\n  } = useAuthContext();\n  const [code_agence, setCodeAgence] = useState('');\n  const [localisation, setLocalisation] = useState('');\n  const [rue, setRue] = useState('');\n  const [error, setError] = useState('');\n  const [successMessage, setSuccessMessage] = useState('');\n  const [emptyFields, setEmptyFields] = useState([]);\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n\n    if (!user) {\n      setError('Vous devez être connecté');\n      return;\n    }\n\n    if (!code_agence || !localisation || !rue) {\n      setError('Veuillez remplir tous les champs');\n      return;\n    }\n\n    const agence = {\n      clientId,\n      code_agence,\n      localisation,\n      rue\n    };\n    const response = await fetch('/api/client/agence', {\n      method: 'POST',\n      body: JSON.stringify(agence),\n      headers: {\n        'Content-type': 'application/json',\n        'Authorization': `Bearer ${user.token}`\n      }\n    });\n    const json = await response.json();\n\n    if (!response.ok) {\n      setError(json.error);\n      setEmptyFields(json.emptyFields || []);\n    }\n\n    if (response.ok) {\n      setEmptyFields([]);\n      setLocalisation('');\n      setCodeAgence('');\n      setRue('');\n      setSuccessMessage(\"Agence ajoutée avec succès\");\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed top-0 left-0 z-10 flex h-full w-full items-center justify-center\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"rounded-md bg-white p-8 border-2 shadow-lg border-tunisys-100\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"mb-4 text-xl font-semibold text-center text-tunisys-100\",\n        children: \"Ajouter agence\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"flex flex-col\",\n        onClick: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Code Agence:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: `block w-full border rounded box-border mb-2 p-2.5 border-solid ${emptyFields.includes('code_agence') ? 'border-red-500' : 'border-[#ddd]'}`,\n          type: \"text\",\n          onChange: e => setCodeAgence(e.target.value),\n          value: code_agence\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Localisation:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: `block w-full border rounded box-border mb-2 p-2.5 border-solid ${emptyFields.includes('localisation') ? 'border-red-500' : 'border-[#ddd]'}`,\n          type: \"text\",\n          onChange: e => setLocalisation(e.target.value),\n          value: localisation\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Rue:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: `block w-full border rounded box-border mb-2 p-2.5 border-solid ${emptyFields.includes('rue') ? 'border-red-500' : 'border-[#ddd]'}`,\n          type: \"text\",\n          onChange: e => setRue(e.target.value),\n          value: rue\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"text-indigo-00 text-green-600 text- mt-4 rounded py-2 px-4 font-bold hover:text-green-600\",\n          type: \"submit\",\n          children: \" Enregistrer \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 21\n        }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"error border rounded mx-0 my-5 p-2.5 border-solid bg-red-300\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 31\n        }, this), successMessage && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"success border rounded mx-0 my-5 p-2.5 border-solid bg-green-300\",\n          children: successMessage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 40\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"mt-2 rounded bg-gray-500 py-2 px-4 font-bold text-white hover:bg-gray-600\",\n          type: \"button\",\n          onClick: handleClose,\n          children: \"Annuler \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 9\n  }, this);\n};\n\n_s(AddAgence, \"8duQMTWVgvZAILlX/Ju9hwJBoLM=\", false, function () {\n  return [useParams, useAuthContext];\n});\n\n_c = AddAgence;\nexport default AddAgence;\n\nvar _c;\n\n$RefreshReg$(_c, \"AddAgence\");","map":{"version":3,"names":["Card","React","useEffect","useState","useAuthContext","useParams","AddAgence","handleClose","client","clientId","user","code_agence","setCodeAgence","localisation","setLocalisation","rue","setRue","error","setError","successMessage","setSuccessMessage","emptyFields","setEmptyFields","handleSubmit","e","preventDefault","agence","response","fetch","method","body","JSON","stringify","headers","token","json","ok","includes","target","value"],"sources":["C:/Users/donia/Documents/Tunisys/src/views/admin/client/composants/addAgence.jsx"],"sourcesContent":["import Card from 'components/card';\nimport React, { useEffect, useState } from 'react';\nimport { useAuthContext } from 'views/auth/hooks/useAuthContext'\nimport { useParams } from 'react-router-dom';\n\n\nconst AddAgence = ({ handleClose ,client}) => {\n    const { clientId } = useParams();\n    const { user } = useAuthContext();\n    const [code_agence, setCodeAgence] = useState('');\n    const [localisation, setLocalisation] = useState('');\n    const [rue, setRue] = useState('');\n    const [error, setError] = useState('');\n    const [successMessage, setSuccessMessage] = useState('');\n    const [emptyFields, setEmptyFields] = useState([]);\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n      \n        if (!user) {\n          setError('Vous devez être connecté');\n          return;\n        }\n      \n        if (!code_agence || !localisation || !rue) {\n          setError('Veuillez remplir tous les champs');\n          return;\n        }\n      \n        const agence = { clientId, code_agence, localisation, rue };\n        const response = await fetch('/api/client/agence', {\n          method: 'POST',\n          body: JSON.stringify(agence),\n          headers: {\n            'Content-type': 'application/json',\n            'Authorization': `Bearer ${user.token}`\n          }\n        });\n      \n        const json = await response.json();\n      \n        if (!response.ok) {\n          setError(json.error);\n          setEmptyFields(json.emptyFields || []);\n        }\n      \n        if (response.ok) {\n          setEmptyFields([]);\n          setLocalisation('');\n          setCodeAgence('');\n          setRue('');\n          setSuccessMessage(\"Agence ajoutée avec succès\");\n        }\n      };\n      \n\n    return (\n        <div className=\"fixed top-0 left-0 z-10 flex h-full w-full items-center justify-center\">\n            <div className=\"rounded-md bg-white p-8 border-2 shadow-lg border-tunisys-100\">\n                <h2 className=\"mb-4 text-xl font-semibold text-center text-tunisys-100\">Ajouter agence</h2>\n                <form className=\"flex flex-col\" onClick={handleSubmit} >\n                    <label>\n                       Code Agence:\n                    </label>\n                    <input className={`block w-full border rounded box-border mb-2 p-2.5 border-solid ${emptyFields.includes('code_agence') ? 'border-red-500' : 'border-[#ddd]'\n                        }`} type=\"text\"\n                        onChange={(e) => setCodeAgence(e.target.value)}\n                        value={code_agence}\n                    />\n                    <label>\n                        Localisation:\n                    </label>\n                    <input className={`block w-full border rounded box-border mb-2 p-2.5 border-solid ${emptyFields.includes('localisation') ? 'border-red-500' : 'border-[#ddd]'\n                        }`} type=\"text\"\n                        onChange={(e) => setLocalisation(e.target.value)}\n                        value={localisation}\n                    />\n                    <label>\n                        Rue:\n                    </label>\n                    <input className={`block w-full border rounded box-border mb-2 p-2.5 border-solid ${emptyFields.includes('rue') ? 'border-red-500' : 'border-[#ddd]'\n                        }`} type=\"text\"\n                        onChange={(e) => setRue(e.target.value)}\n                        value={rue}\n                    />\n                    <button\n                        className=\"text-indigo-00 text-green-600 text- mt-4 rounded py-2 px-4 font-bold hover:text-green-600\"\n                        type=\"submit\"> Enregistrer </button>\n                    {error && <div className=\"error border rounded mx-0 my-5 p-2.5 border-solid bg-red-300\">{error}</div>}\n                    {successMessage && <div className=\"success border rounded mx-0 my-5 p-2.5 border-solid bg-green-300\">{successMessage}</div>}\n                    <button\n                        className=\"mt-2 rounded bg-gray-500 py-2 px-4 font-bold text-white hover:bg-gray-600\"\n                        type=\"button\"\n                        onClick={handleClose} >Annuler </button>\n                </form>\n            </div>\n        </div>\n    );\n};\n\nexport default AddAgence;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}