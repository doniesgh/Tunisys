{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\donia\\\\Documents\\\\Tunisys\\\\src\\\\views\\\\admin\\\\RecReporte\\\\index.jsx\",\n    _s = $RefreshSig$();\n\nimport { useReclamationsContext } from 'Hooks/useRecsContext';\nimport React, { useEffect, useState } from 'react';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { useAuthContext } from 'views/auth/hooks/useAuthContext';\nimport ListeTechniciens from './Components/ListeTechniciens';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst RecRep = () => {\n  _s();\n\n  const {\n    reclamations,\n    dispatch\n  } = useReclamationsContext();\n  const [selectedRec, setSelectedRec] = useState(null);\n  const {\n    user\n  } = useAuthContext();\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await fetch('/api/rec/reporte', {\n          headers: {\n            Authorization: `Bearer ${user.token}`\n          }\n        });\n        const data = await response.json();\n\n        if (response.ok) {\n          dispatch({\n            type: 'SET_REP_REC',\n            payload: data\n          });\n        }\n      } catch (error) {\n        console.error('Error fetching data:', error);\n      }\n    };\n\n    if (user) {\n      fetchData();\n    }\n  }, [dispatch, user]);\n\n  const handleCloseModal = () => {\n    setIsModalOpen(false);\n  };\n\n  const handleOpenModal = reclamation => {\n    setSelectedRec(reclamation);\n    setIsModalOpen(true);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-[1.7em] mt-10 mb-2.5 mx-0 text-center font-semibold dark:text-gray-600\",\n      children: \"R\\xE9clamations Report\\xE9es\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: reclamations && reclamations.map(reclamation => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-5 rounded-2xl relative shadow-[2px_2px_5px_rgba(0,0,0,0.05)] mx-auto my-5 bg-white\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ml-4\",\n            children: /*#__PURE__*/_jsxDEV(\"li\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"mb-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Id :\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 52,\n                  columnNumber: 39\n                }, this), reclamation.idn, \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 52,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"mb-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Client :\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 53,\n                  columnNumber: 39\n                }, this), reclamation.client, \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 53,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"mb-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Localisation :\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 54,\n                  columnNumber: 39\n                }, this), reclamation.localisation, \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 54,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"mb-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Type :\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 55,\n                  columnNumber: 39\n                }, this), reclamation.type, \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 55,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"mb-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Equipement :\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 56,\n                  columnNumber: 39\n                }, this), reclamation.equipement, \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 56,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"mb-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Etat:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 57,\n                  columnNumber: 39\n                }, this), reclamation.etat, \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 57,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"mb-1 \",\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Traiteur:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 59,\n                  columnNumber: 21\n                }, this), reclamation.traiteur ? reclamation.traiteur : /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-tunisys-100 font-extrabold\",\n                  children: \" \\\"Non affect\\xE9e encore\\\"\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 60,\n                  columnNumber: 68\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 58,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"mb-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Date de cr\\xE9ation:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 63,\n                  columnNumber: 21\n                }, this), new Date(reclamation.createdAt).toLocaleString('fr-FR', {\n                  year: 'numeric',\n                  month: 'long',\n                  day: 'numeric',\n                  hour: 'numeric',\n                  minute: 'numeric'\n                })]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 62,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"text-white rounded cursor-pointer p-2.5 border-0 bg-navy-500\",\n                onClick: () => handleOpenModal(reclamation),\n                children: \"R\\xE9affecter\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 72,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 51,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 50,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 13\n        }, this)\n      }, reclamation._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this), isModalOpen && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-content border-x-violet-800\\t\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"close\",\n          onClick: () => setIsModalOpen(false),\n          children: \"\\xD7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 13\n        }, this), isModalOpen && /*#__PURE__*/_jsxDEV(ListeTechniciens, {\n          handleClose: handleCloseModal,\n          reclamation: selectedRec\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 5\n  }, this);\n};\n\n_s(RecRep, \"q+8kIn21JcTG4gYwd+LUjQX2L+8=\", false, function () {\n  return [useReclamationsContext, useAuthContext];\n});\n\n_c = RecRep;\nexport default RecRep;\n\nvar _c;\n\n$RefreshReg$(_c, \"RecRep\");","map":{"version":3,"names":["useReclamationsContext","React","useEffect","useState","useAuthContext","ListeTechniciens","RecRep","reclamations","dispatch","selectedRec","setSelectedRec","user","isModalOpen","setIsModalOpen","fetchData","response","fetch","headers","Authorization","token","data","json","ok","type","payload","error","console","handleCloseModal","handleOpenModal","reclamation","map","idn","client","localisation","equipement","etat","traiteur","Date","createdAt","toLocaleString","year","month","day","hour","minute","_id"],"sources":["C:/Users/donia/Documents/Tunisys/src/views/admin/RecReporte/index.jsx"],"sourcesContent":["import { useReclamationsContext } from 'Hooks/useRecsContext';\nimport React, { useEffect, useState } from 'react';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { useAuthContext } from 'views/auth/hooks/useAuthContext';\nimport ListeTechniciens from './Components/ListeTechniciens';\n\nconst RecRep = () => {\n  const { reclamations, dispatch } = useReclamationsContext();\n  const [selectedRec, setSelectedRec] = useState(null);\n  const { user } = useAuthContext();\n  const [isModalOpen, setIsModalOpen] = useState(false);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await fetch('/api/rec/reporte', {\n          headers: {\n            Authorization: `Bearer ${user.token}`,\n          },\n        });\n        const data = await response.json();\n\n        if (response.ok) {\n          dispatch({ type: 'SET_REP_REC', payload: data });\n        }\n      } catch (error) {\n        console.error('Error fetching data:', error);\n      }\n    };\n\n    if (user) {\n      fetchData();\n    }\n  }, [dispatch, user]);\n  const handleCloseModal = () => {\n    setIsModalOpen(false);\n  };\n\n  const handleOpenModal = (reclamation) => {\n    setSelectedRec(reclamation);\n    setIsModalOpen(true);\n  };\n  return (\n    <div>\n      <h1 className='text-[1.7em] mt-10 mb-2.5 mx-0 text-center font-semibold dark:text-gray-600'>Réclamations Reportées</h1>\n      <ul>\n      {reclamations && reclamations.map((reclamation) => (\n          <div key={reclamation._id} className='p-5 rounded-2xl relative shadow-[2px_2px_5px_rgba(0,0,0,0.05)] mx-auto my-5 bg-white'>\n            <div className='flex'>\n              <div className=\"ml-4\">\n                <li>\n                  <p className=\"mb-1\"><strong>Id :</strong>{reclamation.idn} </p>\n                  <p className=\"mb-1\"><strong>Client :</strong>{reclamation.client} </p>\n                  <p className=\"mb-1\"><strong>Localisation :</strong>{reclamation.localisation} </p>\n                  <p className=\"mb-1\"><strong>Type :</strong>{reclamation.type} </p>\n                  <p className=\"mb-1\"><strong>Equipement :</strong>{reclamation.equipement} </p>\n                  <p className=\"mb-1\"><strong>Etat:</strong>{reclamation.etat} </p>\n                  <p className=\"mb-1 \">\n                    <strong>Traiteur:</strong>\n                    {reclamation.traiteur ? reclamation.traiteur : <span className='text-tunisys-100 font-extrabold'> \"Non affectée encore\"</span>\n                    }</p>\n                  <p className=\"mb-1\">\n                    <strong>Date de création:</strong>\n                    {new Date(reclamation.createdAt).toLocaleString('fr-FR', {\n                      year: 'numeric',\n                      month: 'long',\n                      day: 'numeric',\n                      hour: 'numeric',\n                      minute: 'numeric'\n                    })}\n                  </p>\n                  <button className='text-white rounded cursor-pointer p-2.5 border-0 bg-navy-500' onClick={() => handleOpenModal(reclamation)}>\n                    Réaffecter\n                  </button>\n\n                </li>\n\n              </div>\n            </div>\n          </div>\n        ))}\n      </ul>\n      {isModalOpen && (\n        <div className='modal'>\n          <div className='modal-content border-x-violet-800\t'>\n            <span className='close' onClick={() => setIsModalOpen(false)}>\n              &times;\n            </span>\n            {isModalOpen && <ListeTechniciens handleClose={handleCloseModal} reclamation={selectedRec} />\n            }\n          </div>\n        </div>\n      )}\n\n    </div>\n\n  )\n}\n\nexport default RecRep"],"mappings":"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"},"metadata":{},"sourceType":"module"}